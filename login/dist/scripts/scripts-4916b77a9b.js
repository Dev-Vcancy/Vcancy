"use strict";var vcancyApp=angular.module("vcancyApp",["ngResource","ui.router","ui.bootstrap","angular-loading-bar","oc.lazyLoad","nouislider","ngTable","firebase"]);vcancyApp.config(["$stateProvider","$urlRouterProvider",function(e,a){var i={apiKey:"AIzaSyDO18QznZ7mvAezkQ1M80nUz1OhaHjuwSA",authDomain:"vcancy-5e3b4.firebaseapp.com",databaseURL:"https://vcancy-5e3b4.firebaseio.com",projectId:"vcancy-5e3b4",storageBucket:"vcancy-5e3b4.appspot.com",messagingSenderId:"330892868858"};firebase.initializeApp(i),a.otherwise("/login"),e.state("login",{url:"/login",controller:"loginCtrl",controllerAs:"lctrl",templateUrl:"views/login.html"}).state("emailverification",{url:"/emailverification",templateUrl:"views/emailverification.html"}).state("landlorddashboard",{url:"/landlorddboard",controller:"dboardCtrl",templateUrl:"views/landlord.html"}).state("faq",{url:"/faq",templateUrl:"views/faq.html"}).state("contact",{url:"/contact",templateUrl:"views/contact.html"}).state("security",{url:"/security",templateUrl:"views/security.html"}).state("terms",{url:"/terms",templateUrl:"views/terms.html"})}]),vcancyApp.controller("loginCtrl",["$scope","$firebaseAuth","$state",function(e,a,i){this.head=1,this.login=1,this.register=0,this.forgot=0,this.loginUser=function(e){var l=e.email,s=e.password,t=a();t.$signInWithEmailAndPassword(l,s).then(function(e){console.log(firebase.auth().currentUser),i.go("landlorddashboard"),console.log("Signed in as:",e.uid)})["catch"](function(e){e.message&&$(".loginmsgvalidate").html('<div class="alert alert-danger alert-dismissable fade in">'+e.message+"</div>"),$("form input").removeClass("invalidField"),"auth/invalid-email"===e.code?$("#loginemail").addClass("invalidField"):"auth/wrong-password"===e.code?$("#loginpwd").addClass("invalidField"):"auth/user-not-found"===e.code?$("#loginpwd,#loginemail").addClass("invalidField"):$("#loginpwd,#loginemail").removeClass("invalidField"),console.error("Authentication failed:",e)})},this.registerUser=function(e){var i=e.first,l=e.last,s=e.email,t=e.pass,r=e.cpass,n=e.usertype,o=a();r===t?o.$createUserWithEmailAndPassword(s,t).then(function(e){console.log(e),e.sendEmailVerification().then(function(){console.log("Email Sent")})["catch"](function(e){console.log("Error in sending email"+e)});var a=firebase.database();a.ref("users/"+e.uid).set({firstname:i,lastname:l,usertype:n}),$(".regmsgvalidate").html('<div class="alert alert-success alert-dismissable fade in">User created successfully!</div>')})["catch"](function(e){e.message&&$(".regmsgvalidate").html('<div class="alert alert-danger alert-dismissable fade in">'+e.message+"</div>"),$("form input").removeClass("invalidField"),"auth/invalid-email"===e.code?$("#regemail").addClass("invalidField"):"auth/weak-password"===e.code?$("#regpwd").addClass("invalidField"):$("#regemail,#regpwd").removeClass("invalidField")}):($("form input").removeClass("invalidField"),$("#regcpwd").addClass("invalidField"),$(".regmsgvalidate").html('<div class="alert alert-danger alert-dismissable fade in">Confirm password doesnot match password.</div>'))}}]),vcancyApp.controller("dboardCtrl",["$scope","$firebaseAuth","$state",function(e,a,i){a();console.log(firebase.auth().currentUser),console.log("Signed in as:",firebase.auth().uid)}]);